# OSH Lab2

## shell

实现的功能：

- [x] 能够正确处理含有 1 个管道的命令（1 分）
  - [x] 能够正确处理含有多个管道的命令（1 分）
- [x] 支持 `>`, `>>`, `<` 重定向（各 0.5 分）
  - [x] 【选做】支持指定文件描述符的重定向（**不完整**，只实现了 `n>`, `n>>`, `n<` 这几种格式）
- [x] 在遇到 Ctrl-C 信号时不会中断 （0.5 分）
  - [x] 在遇到 Ctrl-C 时能丢弃已经输入一半的命令行，显示 `#` 提示符并重新接受输入（1 分）
- [x] 【选做】Ctrl-D (EOF) 等同于 `exit` （0.5 分）
- [x] 支持 `history n` 命令（1 分）
  - [x] 支持通过 `!n` 和 `!!` 命令（各 1 分）
  - [x] 【选做】支持历史命令持久化，新打开的 shell 能使用之前保留的记录（1 分）
  - [x] 【选做】通过上下方向键切换到不同的历史命令（1 分）

共计超出 10 分。

程序处理用户输入时使用了 `GNU Readline` 库，提供比较丰富的输入功能，包括大多数的行编辑能力以及文件名补全的能力。为了避偷懒之嫌，自行实现了指令历史的处理，通过 `GNU Readline` 库提供的接口绑定到上下键上。编译时，若定义了宏 `USE_CUSTOM_HISTORY` （此为默认），则会使用我自行实现的方式处理指令历史；否则会使用与 `Readline` 库紧密融合的 `GNU History` 库来提供指令历史。

## strace

**TODO**